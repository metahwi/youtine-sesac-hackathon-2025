# YouTine ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ğŸ“ ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Client (Browser)                         â”‚
â”‚                      React 19 + Vite + Tailwind                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   Segments   â”‚  â”‚   Library    â”‚  â”‚  Dashboard   â”‚          â”‚
â”‚  â”‚     View     â”‚  â”‚     View     â”‚  â”‚     View     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              SmartPlayer Component                        â”‚  â”‚
â”‚  â”‚         (Seamless Multi-Segment Playback)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP/REST API
                              â”‚ (Axios)
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Backend (Express.js)                         â”‚
â”‚                         Port 3000                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   /videos    â”‚  â”‚  /segments   â”‚  â”‚  /routines   â”‚          â”‚
â”‚  â”‚   /logs      â”‚  â”‚  /schedule   â”‚  â”‚  /dashboard  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                            â”‚                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚         â”‚    AI Analysis Service               â”‚                  â”‚
â”‚         â”‚  (OpenAI GPT-4-mini Integration)    â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                            â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Mongoose ODM
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    MongoDB      â”‚
                    â”‚   (Database)    â”‚
                    â”‚                 â”‚
                    â”‚  Collections:   â”‚
                    â”‚  - videos       â”‚
                    â”‚  - segments     â”‚
                    â”‚  - routines     â”‚
                    â”‚  - logs         â”‚
                    â”‚  - schedules    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

External Services:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  YouTube API     â”‚  â”‚   OpenAI API     â”‚  â”‚ YouTube Transcriptâ”‚
â”‚  (Metadata)      â”‚  â”‚  (GPT-4-mini)    â”‚  â”‚     Library      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Prototype (Separate):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Python Motion Coaching Prototype                       â”‚
â”‚                 (Not yet integrated)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MediaPipe Pose + OpenCV                                         â”‚
â”‚  - Real-time pose estimation (33 landmarks)                      â”‚
â”‚  - Angle calculation & form validation                          â”‚
â”‚  - 13 exercise types supported                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ ê³„ì¸µë³„ ìƒì„¸ êµ¬ì¡°

### 1. Frontend Layer (Client)

#### ê¸°ìˆ  ìŠ¤íƒ
- **Framework**: React 19.1.0 (ìµœì‹ )
- **Build Tool**: Vite 6.3.5 (ê³ ì† HMR)
- **Styling**: Tailwind CSS 4.1.7
- **Routing**: React Router DOM 7.6.1
- **State Management**: React Hooks (Context API)
- **HTTP Client**: Axios 1.12.2

#### ì£¼ìš” ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ App.jsx                    # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸ (ë¼ìš°íŒ…)
â”‚   â”œâ”€â”€ SmartPlayer.jsx            # ğŸŒŸ í•µì‹¬: ë‹¤ì¤‘ ì„¸ê·¸ë¨¼íŠ¸ ì—°ì† ì¬ìƒ
â”‚   â”œâ”€â”€ SegmentLibrary.jsx         # ì„¸ê·¸ë¨¼íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë·°
â”‚   â”œâ”€â”€ SegmentEditor.jsx          # ì„¸ê·¸ë¨¼íŠ¸ í¸ì§‘ê¸°
â”‚   â”œâ”€â”€ VideoLibrary.jsx           # ë¹„ë””ì˜¤ ê´€ë¦¬
â”‚   â”œâ”€â”€ RoutineList.jsx            # ë£¨í‹´ ëª©ë¡ (ì‚¬ì´ë“œë°”)
â”‚   â”œâ”€â”€ RoutineDetailView.jsx     # ë£¨í‹´ ìƒì„¸/í¸ì§‘
â”‚   â”œâ”€â”€ DashboardPage.jsx          # ëŒ€ì‹œë³´ë“œ ë©”ì¸
â”‚   â”œâ”€â”€ WorkoutLogger.jsx          # ìš´ë™ ê¸°ë¡ ì‘ì„±
â”‚   â”œâ”€â”€ WorkoutCalendar.jsx        # ì›”ë³„ ìº˜ë¦°ë”
â”‚   â””â”€â”€ ui/                        # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸
â”‚
â”œâ”€â”€ services/
â”‚   â””â”€â”€ api.js                     # Axios ê¸°ë°˜ API í´ë¼ì´ì–¸íŠ¸
â”‚
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ LanguageContext.jsx        # i18n ìƒíƒœ ê´€ë¦¬
â”‚
â”œâ”€â”€ i18n/
â”‚   â””â”€â”€ translations.js            # í•œêµ­ì–´/ì˜ì–´ ë²ˆì—­
â”‚
â””â”€â”€ utils/
    â””â”€â”€ logger.js                  # í”„ë¡ íŠ¸ì—”ë“œ ë¡œê¹…
```

#### SmartPlayer: í•µì‹¬ í˜ì‹  ê¸°ëŠ¥

**ê¸°ëŠ¥**: ì—¬ëŸ¬ YouTube ì˜ìƒì˜ íŠ¹ì • êµ¬ê°„ë“¤ì„ ëŠê¹€ ì—†ì´ ì—°ì† ì¬ìƒ

**ì‘ë™ ì›ë¦¬**:
1. ë£¨í‹´ì— í¬í•¨ëœ ì„¸ê·¸ë¨¼íŠ¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°›ìŒ
2. ê° ì„¸ê·¸ë¨¼íŠ¸ì˜ `sourceVideoId`, `startTime`, `endTime` íŒŒì‹±
3. React Playerì˜ `onProgress` ì´ë²¤íŠ¸ë¡œ í˜„ì¬ ì¬ìƒ ì‹œê°„ ëª¨ë‹ˆí„°ë§
4. `endTime` ë„ë‹¬ ì‹œ ìë™ìœ¼ë¡œ ë‹¤ìŒ ì„¸ê·¸ë¨¼íŠ¸ë¡œ ì „í™˜
5. ì§„í–‰ë¥  í‘œì‹œ: ê°œë³„ ì„¸ê·¸ë¨¼íŠ¸ + ì „ì²´ ë£¨í‹´

**ì½”ë“œ ìœ„ì¹˜**: `/Users/jae/youtine-sesac-hackathon-2025/web-app/client/src/components/SmartPlayer.jsx`

---

### 2. Backend Layer (Server)

#### ê¸°ìˆ  ìŠ¤íƒ
- **Framework**: Express.js 5.1.0
- **Database**: MongoDB (Mongoose ODM 8.19.1)
- **AI**: OpenAI API (GPT-4-mini)
- **Video Processing**: youtube-transcript, ytdl-core

#### API ë¼ìš°íŠ¸ êµ¬ì¡°

```
server/
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ videos.js          # ë¹„ë””ì˜¤ CRUD + AI ë¶„ì„ íŠ¸ë¦¬ê±°
â”‚   â”œâ”€â”€ segments.js        # ì„¸ê·¸ë¨¼íŠ¸ CRUD + í•„í„°ë§
â”‚   â”œâ”€â”€ routines.js        # ë£¨í‹´ CRUD + ì„¸ê·¸ë¨¼íŠ¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ logs.js            # ìš´ë™ ê¸°ë¡ CRUD
â”‚   â”œâ”€â”€ schedule.js        # ìŠ¤ì¼€ì¤„ CRUD + ìº˜ë¦°ë”
â”‚   â””â”€â”€ dashboard.js       # í†µê³„ ë° ì§„í–‰ ìƒí™©
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ Video.js           # ë¹„ë””ì˜¤ ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ ExerciseSegment.js # ì„¸ê·¸ë¨¼íŠ¸ ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ Routine.js         # ë£¨í‹´ ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ WorkoutLog.js      # ìš´ë™ ê¸°ë¡ ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ ScheduledRoutine.js# ìŠ¤ì¼€ì¤„ ìŠ¤í‚¤ë§ˆ
â”‚
â”œâ”€â”€ services/
â”‚   â””â”€â”€ aiAnalysis.js      # ğŸŒŸ OpenAI ì—°ë™ ì„œë¹„ìŠ¤
â”‚
â””â”€â”€ utils/
    â””â”€â”€ logger.js          # ë°±ì—”ë“œ ë¡œê¹…
```

#### AI Analysis Service: í•µì‹¬ ë¡œì§

**ì—­í• **: YouTube ì˜ìƒ ìë§‰ì„ ë¶„ì„í•˜ì—¬ ìš´ë™ êµ¬ê°„ì„ ìë™ìœ¼ë¡œ ì¶”ì¶œ

**ì²˜ë¦¬ íë¦„**:

```
1. YouTube URL ì…ë ¥
   â†“
2. youtube-transcriptë¡œ ìë§‰ ì¶”ì¶œ
   â†“
3. OpenAI GPT-4-miniì—ê²Œ í”„ë¡¬í”„íŠ¸ ì „ì†¡:
   "ë‹¤ìŒ ìë§‰ì—ì„œ ìš´ë™ ë™ì‘ì„ ì°¾ì•„ JSONìœ¼ë¡œ ë°˜í™˜:
    - exerciseName (í‘œì¤€í™”ëœ ì´ë¦„)
    - startTime (ì´ˆ ë‹¨ìœ„)
    - endTime (ì´ˆ ë‹¨ìœ„)
    - targetMuscles (ë°°ì—´)"
   â†“
4. OpenAI ì‘ë‹µ íŒŒì‹±
   â†“
5. ExerciseSegment ë„íë¨¼íŠ¸ ìƒì„± (MongoDB)
   â†“
6. Video ìƒíƒœë¥¼ 'completed'ë¡œ ì—…ë°ì´íŠ¸
```

**ì½”ë“œ ìœ„ì¹˜**: `/Users/jae/youtine-sesac-hackathon-2025/web-app/server/services/aiAnalysis.js`

**í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ**:
```javascript
{
  model: "gpt-4-mini",
  temperature: 0.3,
  messages: [{
    role: "system",
    content: "You are an expert fitness coach analyzing workout videos..."
  }, {
    role: "user",
    content: `Analyze this transcript and extract exercises:\n${transcript}`
  }]
}
```

---

### 3. Database Layer (MongoDB)

#### ë°ì´í„° ëª¨ë¸ ê´€ê³„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Video     â”‚
â”‚  (ìœ íŠœë¸Œ ì˜ìƒ)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1
       â”‚
       â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ExerciseSegment   â”‚â—„â”€â”€â”€â”€â”€â”
â”‚  (ìš´ë™ êµ¬ê°„)       â”‚      â”‚ N
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
       â”‚ N                  â”‚
       â”‚                    â”‚
       â”‚ N           â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   Routine    â”‚
â”‚  WorkoutLog    â”‚   â”‚  (ìš´ë™ ë£¨í‹´)  â”‚
â”‚  (ìš´ë™ ê¸°ë¡)    â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ 1
                            â”‚
                            â”‚ N
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ ScheduledRoutine  â”‚
                   â”‚  (ì˜ˆì•½ëœ ë£¨í‹´)     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì»¬ë ‰ì…˜ ìš”ì•½

1. **videos**: YouTube ì˜ìƒ ë©”íƒ€ë°ì´í„° ë° ë¶„ì„ ìƒíƒœ
2. **exercisesegments**: AIê°€ ì¶”ì¶œí•œ ìš´ë™ êµ¬ê°„ ì •ë³´
3. **routines**: ì‚¬ìš©ìê°€ ìƒì„±í•œ ìš´ë™ ë£¨í‹´ (ì„¸ê·¸ë¨¼íŠ¸ ì¡°í•©)
4. **workoutlogs**: ìš´ë™ ì‹¤í–‰ ê¸°ë¡ (ì„¸íŠ¸, íšŸìˆ˜, ë©”ëª¨)
5. **scheduledroutines**: ìº˜ë¦°ë”ì— ì˜ˆì•½ëœ ë£¨í‹´

ìƒì„¸í•œ ìŠ¤í‚¤ë§ˆëŠ” [DATABASE_SCHEMA.md](./DATABASE_SCHEMA.md) ì°¸ì¡°

---

## ğŸ”„ ì£¼ìš” ë°ì´í„° íë¦„

### Flow 1: YouTube ì˜ìƒ ì¶”ê°€ ë° AI ë¶„ì„

```
[User]
  â†“ 1. YouTube URL ì…ë ¥
[Frontend: VideoInputForm]
  â†“ 2. POST /api/videos
[Backend: videos.js]
  â†“ 3. Video ë„íë¨¼íŠ¸ ìƒì„± (status: 'processing')
[Backend: aiAnalysis.js]
  â†“ 4a. youtube-transcriptë¡œ ìë§‰ ì¶”ì¶œ
  â†“ 4b. OpenAI API í˜¸ì¶œ (GPT-4-mini)
  â†“ 4c. ì‘ë‹µ íŒŒì‹± ë° ExerciseSegment ìƒì„±
  â†“ 5. Video ìƒíƒœ ì—…ë°ì´íŠ¸ (status: 'completed')
[MongoDB]
  â†“ 6. GET /api/videos/:id (í´ë§)
[Frontend: VideoLibrary]
  â†“ 7. ë¶„ì„ ì™„ë£Œ ì•Œë¦¼
[User]
```

**ì†Œìš” ì‹œê°„**: ì•½ 10-30ì´ˆ (ì˜ìƒ ê¸¸ì´ì— ë”°ë¼ ë‹¤ë¦„)

---

### Flow 2: ë£¨í‹´ ìƒì„± ë° ì¬ìƒ

```
[User]
  â†“ 1. ì„¸ê·¸ë¨¼íŠ¸ ì„ íƒ
[Frontend: SegmentLibrary]
  â†“ 2. "Add to Routine" í´ë¦­
[Frontend: RoutineList]
  â†“ 3. POST /api/routines (segments: [segmentId1, segmentId2, ...])
[Backend: routines.js]
  â†“ 4. Routine ë„íë¨¼íŠ¸ ìƒì„±
[MongoDB]
  â†“ 5. GET /api/routines/:id (populate segments)
[Frontend: RoutineDetailView]
  â†“ 6. ì„¸ê·¸ë¨¼íŠ¸ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ (ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê°€ëŠ¥)
[User]
  â†“ 7. "Play Routine" í´ë¦­
[Frontend: SmartPlayer]
  â†“ 8. ê° ì„¸ê·¸ë¨¼íŠ¸ì˜ YouTube URL + ì‹œì‘/ì¢…ë£Œ ì‹œê°„ìœ¼ë¡œ ì—°ì† ì¬ìƒ
[User]
```

---

### Flow 3: ìš´ë™ ê¸°ë¡ ë° í†µê³„

```
[User]
  â†“ 1. ìš´ë™ ì™„ë£Œ í›„ "Log Workout" í´ë¦­
[Frontend: WorkoutLogger]
  â†“ 2. ìš´ë™ëª…, ì„¸íŠ¸, íšŸìˆ˜, ë¬´ê²Œ, ë©”ëª¨ ì…ë ¥
  â†“ 3. POST /api/logs
[Backend: logs.js]
  â†“ 4. WorkoutLog ë„íë¨¼íŠ¸ ìƒì„±
[MongoDB]
  â†“ 5. GET /api/dashboard/stats (ì§‘ê³„)
[Backend: dashboard.js]
  â†“ 6. MongoDB Aggregation Pipeline ì‹¤í–‰
       - ì´ë²ˆ ë‹¬ ìš´ë™ íšŸìˆ˜
       - ì—°ì† ìš´ë™ ì¼ìˆ˜ (ìŠ¤íŠ¸ë¦­)
       - ì´ ì„¸íŠ¸/ë°˜ë³µ íšŸìˆ˜
       - ìì£¼ í•˜ëŠ” ìš´ë™ TOP 5
[Frontend: DashboardPage]
  â†“ 7. í†µê³„ ì¹´ë“œ ë° ì°¨íŠ¸ ë Œë”ë§
[User]
```

---

## ğŸ¤– AI/ML ì•„í‚¤í…ì²˜ (Prototype)

### Python Motion Coaching System

**ìœ„ì¹˜**: `prototypes/python-squat-counter/`

**êµ¬ì¡°**:

```
src/
â”œâ”€â”€ core/
â”‚   â””â”€â”€ pose_detector.py
â”‚       - MediaPipe Pose ë˜í¼
â”‚       - findPose(), findPosition(), findAngle()
â”‚
â”œâ”€â”€ exercises/
â”‚   â”œâ”€â”€ base_exercise.py
â”‚   â”‚   - ì¶”ìƒ í´ë˜ìŠ¤ BaseExercise
â”‚   â”‚   - count, direction, form, feedback ì†ì„±
â”‚   â”‚   - update_feedback_and_count() ì¶”ìƒ ë©”ì„œë“œ
â”‚   â”‚
â”‚   â”œâ”€â”€ squat_counter.py
â”‚   â”œâ”€â”€ pushup_counter.py
â”‚   â”œâ”€â”€ lunge_counter.py
â”‚   â””â”€â”€ ... (13ê°œ ìš´ë™)
â”‚
â””â”€â”€ utils/
    â””â”€â”€ camera.py
        - ì›¹ìº  ìº¡ì²˜ ë° í”„ë ˆì„ ì²˜ë¦¬
```

**ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸**:

```
[Webcam]
  â†“ 1. í”„ë ˆì„ ìº¡ì²˜
[OpenCV]
  â†“ 2. BGR â†’ RGB ë³€í™˜
[MediaPipe Pose]
  â†“ 3. 33ê°œ ëœë“œë§ˆí¬ ê°ì§€
     - 0: ì½”, 11: ì™¼ìª½ ì–´ê¹¨, 12: ì˜¤ë¥¸ìª½ ì–´ê¹¨
     - 23: ì™¼ìª½ ê³¨ë°˜, 24: ì˜¤ë¥¸ìª½ ê³¨ë°˜
     - 25: ì™¼ìª½ ë¬´ë¦, 26: ì˜¤ë¥¸ìª½ ë¬´ë¦
     - 27: ì™¼ìª½ ë°œëª©, 28: ì˜¤ë¥¸ìª½ ë°œëª©
[PoseDetector]
  â†“ 4. ê´€ì ˆ ê°ë„ ê³„ì‚° (ì˜ˆ: ë¬´ë¦ ê°ë„ = ê³¨ë°˜-ë¬´ë¦-ë°œëª©)
[ExerciseCounter (ì˜ˆ: SquatCounter)]
  â†“ 5. ìì„¸ ê²€ì¦
     - ë¬´ë¦ ê°ë„ > 160Â°: ì‹œì‘ ìì„¸
     - ë¬´ë¦ ê°ë„ < 90Â°: ìŠ¤ì¿¼íŠ¸ í•˜ë‹¨
     - í—ˆë¦¬ ê°ë„ > 160Â°: ì˜¬ë°”ë¥¸ ìì„¸
  â†“ 6. ì¹´ìš´í„° ì—…ë°ì´íŠ¸ (direction ì „í™˜ ê°ì§€)
  â†“ 7. í”¼ë“œë°± ìƒì„± ("Fix Form", "Down", "Up")
[OpenCV]
  â†“ 8. UI ì˜¤ë²„ë ˆì´ ë Œë”ë§
     - í¬ì¦ˆ ìŠ¤ì¼ˆë ˆí†¤
     - ê°ë„ ì£¼ì„
     - ì¹´ìš´í„° í‘œì‹œ
     - ì§„í–‰ ë°”
[Display]
```

**macOS ìµœì í™”**:
```python
os.environ['MEDIAPIPE_DISABLE_GPU'] = '1'  # OpenGL ì»¨í…ìŠ¤íŠ¸ ì´ìŠˆ í•´ê²°
```

---

## ğŸ”Œ í†µí•© ê³„íš (í–¥í›„)

### Python Prototype â†’ Web App í†µí•© ë°©ì•ˆ

#### Option 1: WebRTC (ì¶”ì²œ)
```
[Frontend: React]
  â†“ MediaDevices API (ì¹´ë©”ë¼ ì ‘ê·¼)
  â†“ WebRTC Peer Connection
[Backend: Python WebSocket Server]
  â†“ í”„ë ˆì„ ìˆ˜ì‹  (Base64 ë˜ëŠ” Binary)
  â†“ MediaPipe ì²˜ë¦¬
  â†“ í”¼ë“œë°± ì „ì†¡ (JSON)
[Frontend: React]
  â†“ ì‹¤ì‹œê°„ í”¼ë“œë°± í‘œì‹œ
```

**ë¼ì´ë¸ŒëŸ¬ë¦¬**: `aiortc` (Python), `simple-peer` (JS)

#### Option 2: WebAssembly (ê³ ê¸‰)
```
[MediaPipe] â†’ WASM ì»´íŒŒì¼
[Frontend: React] â†’ Web Workerì—ì„œ WASM ì‹¤í–‰
```

**ì¥ì **: ì„œë²„ ë¶ˆí•„ìš”, ì™„ì „í•œ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì²˜ë¦¬
**ë‹¨ì **: ë³µì¡í•œ ë¹Œë“œ íŒŒì´í”„ë¼ì¸

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **API í‚¤ ê´€ë¦¬**
   - `.env` íŒŒì¼ë¡œ í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
   - `.gitignore`ì— `.env` ì¶”ê°€
   - í”„ë¡ íŠ¸ì—”ë“œì— API í‚¤ ë…¸ì¶œ ê¸ˆì§€

2. **CORS ì„¤ì •**
   - Expressì—ì„œ `cors` ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©
   - í”„ë¡œë•ì…˜ì—ì„œëŠ” íŠ¹ì • ë„ë©”ì¸ë§Œ í—ˆìš©

3. **ì…ë ¥ ê²€ì¦**
   - YouTube URL í˜•ì‹ ê²€ì¦
   - MongoDB Injection ë°©ì§€ (Mongoose ìë™ ì²˜ë¦¬)

4. **Rate Limiting**
   - OpenAI API í˜¸ì¶œ ì œí•œ (í–¥í›„ ì¶”ê°€ í•„ìš”)
   - Express Rate Limiter ë¯¸ë“¤ì›¨ì–´

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### Frontend
- **Code Splitting**: React Routerì˜ `lazy()` ì‚¬ìš© ê°€ëŠ¥
- **Image Optimization**: YouTube ì¸ë„¤ì¼ ìºì‹±
- **Debouncing**: ê²€ìƒ‰ ì…ë ¥ ìµœì í™”

### Backend
- **MongoDB Indexing**: `videoId`, `exerciseName`, `targetMuscles`ì— ì¸ë±ìŠ¤
- **Caching**: ìì£¼ ì¡°íšŒë˜ëŠ” ë£¨í‹´ Redis ìºì‹± (í–¥í›„)
- **Connection Pooling**: Mongoose ê¸°ë³¸ í’€ ì‚¬ìš©

### AI Analysis
- **Batch Processing**: ì—¬ëŸ¬ ì˜ìƒ ë™ì‹œ ë¶„ì„ (í–¥í›„)
- **Timeout ì„¤ì •**: 60ì´ˆ íƒ€ì„ì•„ì›ƒìœ¼ë¡œ ë¬´í•œ ëŒ€ê¸° ë°©ì§€

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### Frontend (Vitest)
- **Unit Tests**: `logger.test.js`, `api.test.js`
- **Component Tests**: `ErrorBoundary.test.jsx`
- **Integration Tests**: API í˜¸ì¶œ ëª¨í‚¹

### Backend
- **í˜„ì¬ ìƒíƒœ**: í…ŒìŠ¤íŠ¸ ì—†ìŒ
- **í–¥í›„ ê³„íš**: Jest + Supertestë¡œ API í…ŒìŠ¤íŠ¸

### Python Prototype
- **í…ŒìŠ¤íŠ¸ íŒŒì¼**: `tests/test_squat.py` ë“± 13ê°œ
- **ì‹¤í–‰ ë°©ë²•**: `python tests/test_squat.py`

---

## ğŸ“¦ ë°°í¬ ì•„í‚¤í…ì²˜ (ê³„íš)

```
[Frontend] â†’ Vercel (ì •ì  í˜¸ìŠ¤íŒ…)
    â†“ API ìš”ì²­
[Backend] â†’ Railway / Render (Express ì„œë²„)
    â†“ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
[MongoDB] â†’ MongoDB Atlas (í´ë¼ìš°ë“œ DB)
    â†“ ì™¸ë¶€ API
[OpenAI] â†’ OpenAI Platform
```

**í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**:
- Vercel: í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (API URL)
- Railway: `.env` ë³€ìˆ˜ ì¶”ê°€ (MongoDB URI, OpenAI Key)

---

## ğŸ”„ CI/CD (í–¥í›„)

```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install dependencies
        run: |
          cd web-app/client && pnpm install
          cd ../server && npm install
      - name: Run tests
        run: |
          cd web-app/client && pnpm test

  deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - name: Deploy to Vercel
        run: vercel --prod
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [React ê³µì‹ ë¬¸ì„œ](https://react.dev)
- [Express ê³µì‹ ë¬¸ì„œ](https://expressjs.com)
- [MongoDB ê³µì‹ ë¬¸ì„œ](https://docs.mongodb.com)
- [OpenAI API ë¬¸ì„œ](https://platform.openai.com/docs)
- [MediaPipe Pose ê°€ì´ë“œ](https://google.github.io/mediapipe/solutions/pose.html)
- [OpenCV Python íŠœí† ë¦¬ì–¼](https://docs.opencv.org/4.x/d6/d00/tutorial_py_root.html)

---

**ì‘ì„±ì¼**: 2025-01-18
**ì‘ì„±ì**: ì­ê³¼ ì½©ì´ë‹´ (ê°•ì´ë‹´, ì´ì¬íœ˜)
